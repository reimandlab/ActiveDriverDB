{% set references = protein.external_references %}
{% set target = 'target="_blank"' | safe %}

<div class="panel panel-default external-references panel-with-btn">
  <div class="panel-heading">
    <div class="heading-left">
      <h3 class="panel-title">External references</h3>
    </div>
    <div class="heading-right">
      <div class="source-acknowledgement">
        Mappings were retrieved from NCBI & Uniprot.
      </div>
    </div>
  </div>
  <div class="panel-body">

    <dl class="refseq">
        <dt>RefSeq</dt>
        <dd>
          <ul class="list-inline">
            <li><a href="https://www.ncbi.nlm.nih.gov/nuccore/{{ protein.refseq }}" {{ target }}>mRNA: {{ protein.refseq }}</a>
            {% if references.refseq_np %}
            <li><a href="https://www.ncbi.nlm.nih.gov/protein/{{ protein.refseq_np }}" {{ target }}>protein: {{ references.refseq_np }}</a>
            {% endif %}
            {% if references.refseq_ng %}
            <li><a href="https://www.ncbi.nlm.nih.gov/nuccore/{{ protein.refseq_ng }}" {{ target }}>gene: {{ references.refseq_ng }}</a>
            {% endif %}
          </ul>
        </dd>
    </dl>

    {% if references.entrez_id %}
    <dl>
        <dt>Entrez Gene</dt>
        <dd>
          <a href="https://www.ncbi.nlm.nih.gov/gene/{{ references.entrez_id }}" {{ target }}>{{ references.entrez_id }}</a>
        </dd>
    </dl>
    {% endif %}

    {% if references.uniprot_entries %}
      <dl class="uniprot">
        <dt>Uniprot</dt>
        <dd>
          {% for uniprot in references.uniprot_entries %}
            <ul class="list-inline">
              <li><a href="http://www.uniprot.org/uniprot/{{ uniprot.accession }}" {{ target }}>{{ uniprot.accession }}{% if uniprot.isoform != 1 %} isoform {{ uniprot.isoform }} {% endif %}</a>
              <li><a href="http://www.phosphosite.org/uniprotAccAction?id={{ uniprot.accession }}" {{ target }}>Phosposite</a>
              <li><a href="http://pfam.xfam.org/protein?acc={{ uniprot.accession }}" {{ target }}>PFAM</a>
              <li><a href="http://string-db.org/newstring_cgi/show_network_section.pl?identifier={{ uniprot.accession }}" {{ target }}>STRING</a>
              <li><a href="http://www.phospho3d.org/search.py?flag=3&query_string={{ uniprot.accession }}&redundancy=all" {{ target }}>phospho3d</a>
              <li><a href="http://www.reactome.org/content/query?cluster=true&q={{ uniprot.accession }}" {{ target }}>Reactome</a>
              <li><a href="http://www.rcsb.org/pdb/protein/{{uniprot.accession}}" {{ target }}>PDB</a>
            </ul>
          {% endfor %}
        </dd>
      </dl>
    {% endif %}

    {% if references.ensembl_peptides %}
      <dl>
        <dt>Ensembl protein</dt>
        <dd>
          <ul class="list-inline">
            {% for ensembl_peptide in references.ensembl_peptides %}
              <li><a href="http://www.ensembl.org/Homo_sapiens/Transcript/ProteinSummary?p={{ ensembl_peptide.peptide_id }}" {{ target }}>{{ ensembl_peptide.peptide_id }}</a>
            {% endfor %}
          </ul>
        </dd>
      </dl>
    {% endif %}

  </div>
</div>
